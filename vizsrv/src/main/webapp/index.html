<!DOCTYPE html>
<meta charset="utf-8">
<html>
    <header>
        <title>
            Network diagram
        </title>

        <link href="style.css" rel="stylesheet">
        <script src="resources/jquery/jquery.js"></script>
        <script src="resources/popper/popper.js"></script>
        <link href="resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <script src="resources/bootstrap/js/bootstrap.js"></script>
        <script src="resources/d3/d3.js"></script>
        <script src="resources/datatables/jquery.dataTables.min.js"></script>
        <script src="resources/datatables/dataTables.bootstrap4.min.js"></script>
        <script src="resources/datatables/dataTables.select.min.js"></script>
    </header>
    <body>

    <!-- The Modal -->
    <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 id="modalTitle" class="modal-title">Link messages</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <table id="modalTable" class="table table-sm table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Date/time</th>
                                <th>Data source</th>
                                <th>Message beginning</th>
                                <th>Full text</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div class="collapse" id="myCollapsible">
                        <div id="messageText" class="card card-block">
                        </div>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>


        <div class="container-fluid">
            <div class="row">
                <nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                            <div class="panel panel-default">
                                <div class="panel-heading">Sources</div>
                                <div class="panel-body">
                                    <ul id="data_source_list" class="list-group">
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="panel panel-default">
                                <div class="panel-heading">Time</div>
                                <div class="panel-body">
                                    <input id="minDt" type="range"/>
                                    <p id="minDtText">150</p>
                                    <input id="maxDt" type="range"/>
                                    <p id="maxDtText">200</p>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>

                <main role="main" class="col-sm-9 ml-sm-auto col-md-10 pt-3">
                    <h1 class="page-header">WeSee</h1>

                    <div id="svgDiv" class="panel panel-default">
                        <svg id="svg"/>
                    </div>
                    <footer class="footer">2017</footer>

                </main>
            </div>
        </div>
    <script src="draw/objectSizes.js"></script>
    <script src="drawUtils.js"></script>
    <script src="popupUtils.js"></script>
    <script src="dataloader.js"></script>
    <script src="inputControl.js"></script>
    <script src="graph.js"></script>
    <script src="messagesPopupControl.js"></script>
    <script>
//        $(document).ready(function() {
//            var dataTable = $('#modalTable').DataTable({
//                //scrollY: "30vh",
//            });
//            console.debug(dataTable);
//            $('#myModal').modal({keyboard: true });
//        } );
        dataloader.loadDataSources(function(rawDataSourceDescription)
        {
            var processedDataSourceDescription = drawUtils.getDataSourceMapping(rawDataSourceDescription);
            inputControl.setDataSources(processedDataSourceDescription);
        });

    </script>
    </body>
</html>